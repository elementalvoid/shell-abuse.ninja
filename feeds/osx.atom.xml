<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>Shell Abuse - OSX</title><link href="https://shell-abuse.ninja/" rel="alternate"></link><link href="https://shell-abuse.ninja/feeds/osx.atom.xml" rel="self"></link><id>https://shell-abuse.ninja/</id><updated>2015-05-17T00:45:00-06:00</updated><subtitle>Bending the shell to your whim - occasionally with abandon.</subtitle><entry><title>When OSX shebang won’t use Bash 4 from brew</title><link href="https://shell-abuse.ninja/when-osx-shebang-wont-use-bash-4.html" rel="alternate"></link><published>2015-05-17T00:45:00-06:00</published><updated>2015-05-17T00:45:00-06:00</updated><author><name>Matt Klich - Chief Abuser</name></author><id>tag:shell-abuse.ninja,2015-05-17:/when-osx-shebang-wont-use-bash-4.html</id><summary type="html">&lt;p&gt;What do you do when &lt;span class="caps"&gt;OSX&lt;/span&gt; decides to replace Bash4 with Bash3? Get&amp;nbsp;creative!&lt;/p&gt;</summary><content type="html">&lt;p&gt;Gah! A fellow at work had a Mac that refused to run Bash 4 as installed via &lt;a href="http://brew.sh/"&gt;Brew&lt;/a&gt;. He could run &lt;code&gt;bash&lt;/code&gt; from a shell and get 4.x but no matter what we did to the shebang of our script it always ended up running Bash 3 as installed by Apple. We came up with this ugly&amp;nbsp;bit:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="ch"&gt;#!/usr/bin/env bash&lt;/span&gt;
&lt;span class="c1"&gt;## ensure bash 4.x&lt;/span&gt;
&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;[[&lt;/span&gt; &lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;BASH_VERSION&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt; &amp;lt; &lt;span class="m"&gt;4&lt;/span&gt;.0 &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="se"&gt;\&lt;/span&gt;
      -x /usr/local/bin/bash &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="se"&gt;\&lt;/span&gt;
      &lt;span class="k"&gt;$(&lt;/span&gt;/usr/local/bin/bash -c &lt;span class="s1"&gt;&amp;#39;echo $BASH_VERSION&amp;#39;&lt;/span&gt;&lt;span class="k"&gt;)&lt;/span&gt; &amp;gt; &lt;span class="m"&gt;4&lt;/span&gt;.0 &lt;span class="o"&gt;]]&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;
  &lt;span class="nb"&gt;exec&lt;/span&gt; /usr/local/bin/bash &lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;0&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt; &lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="p"&gt;@&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;
&lt;span class="k"&gt;elif&lt;/span&gt; &lt;span class="o"&gt;[[&lt;/span&gt; &lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;BASH_VERSION&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt; &amp;lt; &lt;span class="m"&gt;4&lt;/span&gt;.0 &lt;span class="o"&gt;]]&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;
  &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;Mac FOOL. Try running: brew install bash coreutils&amp;#39;&lt;/span&gt;
  &lt;span class="nb"&gt;exit&lt;/span&gt; &lt;span class="m"&gt;42&lt;/span&gt;
&lt;span class="k"&gt;fi&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;It works on both Linux and&amp;nbsp;Mac.&lt;/p&gt;</content><category term="osx"></category><category term="bash"></category><category term="ugly hack"></category></entry></feed>